@model Technolab.OnlineLibrary.Web.ViewModels.BookSearchViewModel

@{
    ViewData["Title"] = "Books";
    Pager pager = new Pager();
    int pageNo = 0;
    if(ViewBag.Pager != null )
    {
       pager = ViewBag.Pager;
       pageNo = pager.CurrentPage;
    }
}

<h1 class="display-4 mb-6">Books</h1>

@foreach (var book in Model.Books)
{
    <div class="card mb-6">
        <div class="card-body">
            <h4 class="card-title">@book.Title</h4>
            <h6 class="card-subtitle mb-2 text-body-secondary">By @book.Author</h6>
            <a class="card-link" asp-area="" asp-controller="Checkouts" asp-action="Index">Get this item</a>
        </div>
    </div>
}

@*Paging*@
<div class="container">
    @if(pager.TotalPages > 0)
    {
        <ul class="pagination justify-content-end">
            @if(pager.CurrentPage > 1)
            {
                <li class="page-item">
                    <a class="page-link" asp-controller="Books" asp-action="Index" asp-route-pg="1">
                        First
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" asp-controller="Books" asp-action="Index" asp-route-pg="@(pager.CurrentPage-1)">
                        Previous
                    </a>
                </li>
            }
            @for(var pge = pager.StartPage; pge <= pager.EndPage; pge++)
            {
                <li class="page-item @(pge == pager.CurrentPage ? "active" : "")">
                    <a class="page-link" asp-controller="Books" asp-action="Index" asp-route-pg="@pge">
                        @pge
                    </a>

                </li>
            }
            @if(pager.CurrentPage < pager.TotalPages)
            {
                <li class="page-item">
                    <a class="page-link" asp-controller="Books" asp-action="Index" asp-route-pg="@(pager.CurrentPage+1)">
                        Next
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" asp-controller="Books" asp-action="Index" asp-route-pg="@pager.TotalPages">
                        Last
                    </a>
                </li>
            }
        </ul>
    }
</div>